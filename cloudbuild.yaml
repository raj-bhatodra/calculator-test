steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/big-query-406006/testreact-app', '.']

- name: 'gcr.io/cloud-builders/gcloud'
  args: ['container', 'clusters', 'get-credentials', 'autopilot-cluster-1', '--region', 'us-central1']

- name: 'gcr.io/cloud-builders/kubectl'
  args:
    - 'config'
    - 'use-context'
    - 'gke_big-query-406006_us-central1_autopilot-cluster-1'  # Replace with your cluster context
    - '&&'
    - 'apply'
    - '-f'
    - 'deployment.yaml'
    - '-f'
    - 'service.yaml'

logsBucket: 'gs://logsbuild'
